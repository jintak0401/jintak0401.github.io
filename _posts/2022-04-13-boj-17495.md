---
title: "[ë°±ì¤€ 17495] í”¼ì•„ë…¸ ì—°ì£¼ (íŒŒì´ì¬ / Python)"
author: HashTable
categories: [ì•Œê³ ë¦¬ì¦˜, ë°±ì¤€]
tags: [ì•Œê³ ë¦¬ì¦˜, ë°±ì¤€, DP]
date: 2022-04-13 21:50:00 +0900
math: true
---

---
## ğŸ“‘ ë¬¸ì œ

ë¬¸ì œë§í¬ : [í”¼ì•„ë…¸ ì—°ì£¼](https://www.acmicpc.net/problem/17495){:target="_blank"}

---
## ğŸ¤” ìƒê°ì˜ íë¦„

ì˜ˆì „ì— í•™êµ ìˆ˜ì—…ì‹œê°„ì— ë°°ì› ë˜ [Assembly Line Scheduling](https://iq.opengenus.org/assembly-line-scheduling-dp/) ì´ ë– ì˜¬ëìŠµë‹ˆë‹¤.
dp[i][j] = i ë²ˆì§¸ì— j ì†(0: ì™¼ì†, 1: ì˜¤ë¥¸ì†) ìœ¼ë¡œ ì³¤ì„ ë•Œ 0ë²ˆì§¸ë¶€í„°ì˜ ê±°ë¦¬ í•©ìœ¼ë¡œ ì •ì˜í•˜ê³  í’€ì—ˆë”ë‹ˆ í‹€ë ¸ìŠµë‹ˆë‹¤ê°€ ë‚˜ì™”ìŠµë‹ˆë‹¤.

í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìƒì„±í•˜ëŠ” ì½”ë“œë¥¼ ì§œì„œ ëŒë ¤ë´¤ë”ë‹ˆ ì•„ë˜ì™€ ê°™ì€ ë°˜ë¡€ë“¤ì´ ìˆì—ˆìŠµë‹ˆë‹¤.
```text
G2 D1
10
A1# E1# G2# A2 D2 D0 A2 C2 E0 C0#

G2# E1#
5
E0 B1 G2 G1 A0#
```

Assembly Line Scheduling ì•Œê³ ë¦¬ì¦˜ì€ i ë²ˆì§¸ì—ì„œ (i+1) ë²ˆì§¸ë¡œ ë„˜ì–´ê°€ëŠ”ë° ë”í•´ì§€ëŠ” ê°’ì´ ê³ ì •ì ì´ì§€ë§Œ,
ì´ ë¬¸ì œëŠ” i ë²ˆì§¸ì—ì„œì˜ ì† ìœ„ì¹˜ê°€ ì´í›„ì— ë”í•´ì§€ëŠ” ê°’ë“¤ì—ë„ ì˜í–¥ì„ ì£¼ê¸° ë•Œë¬¸ì— ì´ ì•Œê³ ë¦¬ì¦˜ì„ ì´ìš©í•  ìˆ˜ ì—†ë˜ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.

ê·¸ë˜ì„œ ë‹¤ë¥¸ ì í™”ì‹ì„ ì„¸ì› ìŠµë‹ˆë‹¤. arr[i] ë¥¼ ì‹œê°„ i ì—ì„œ ìŒ, l ê³¼ r ì„ ì™¼ì†ê³¼ ì˜¤ë¥¸ì†ì˜ ìœ„ì¹˜ë¼ê³  í•  ë•Œ,

$$dp[i][l][r] = min(|arr[i] - l| + dp[i+1][arr[i]][r], |arr[i] - r| + dp[i+1][l][arr[i]])$$

ì´ë©°, dp[i][l][r] ì€ i ë²ˆì§¸ì—ì„œ ì™¼ì†ê³¼ ì˜¤ë¥¸ì†ì´ l ê³¼ r ì— ìˆì„ ë•Œ, i ë²ˆì§¸ë¶€í„° ë§ˆì§€ë§‰ê¹Œì§€ ì—°ì£¼í–ˆì„ ë•Œì˜ ìµœì†Œ ê±°ë¦¬ì…ë‹ˆë‹¤.
ì°¸ê³ ë¡œ ìœ„ ì‹ì—ì„œ min í•¨ìˆ˜ ì•ˆì˜ ì™¼ìª½ì€ ì™¼ì†ì„ ì›€ì§ì¸ ê²½ìš°, ì˜¤ë¥¸ìª½ì€ ì˜¤ë¥¸ì†ì„ ì›€ì§ì¸ ê²½ìš°ì…ë‹ˆë‹¤.

---

## ğŸ¯ í’€ì´ë°©ë²•

**DP** ë¬¸ì œì…ë‹ˆë‹¤.

> **convert(a)** : ìŒì„ ë‚˜íƒ€ë‚´ëŠ” ë¬¸ìì—´ a ë¥¼ ì…ë ¥ë°›ì•„ C0 = 0 ì„ ê¸°ì¤€ìœ¼ë¡œ í•˜ì—¬ ì •ìˆ˜ë¡œ ë³€í™˜í•´ì£¼ëŠ” í•¨ìˆ˜
>
> **arr** : ì³ì•¼í•˜ëŠ” ìŒë“¤ì„ ì €ì¥í•œ ë¦¬ìŠ¤íŠ¸
>
> **dp[i][l][r]** : ì™¼ì†ê³¼ ì˜¤ë¥¸ì†ì´ l ê³¼ r ì— ìˆì„ ë•Œ, i ë²ˆì§¸ë¶€í„° ë§ˆì§€ë§‰ê¹Œì§€ ì—°ì£¼í–ˆì„ ë•Œì˜ ê±°ë¦¬
>
> **calc(depth, left, right)** : dfs ë°©ì‹ìœ¼ë¡œ dp[depth][left][right] ë¥¼ ê³„ì‚°í•˜ê³  dp ë¦¬ìŠ¤íŠ¸ì— ì €ì¥í•˜ëŠ” í•¨ìˆ˜
{:.prompt-info}

1. ì´ˆê¸° ì™¼ì†ì˜ ìœ„ì¹˜(= l)ê³¼ ì˜¤ë¥¸ì†ì˜ ìœ„ì¹˜(= r)ë¥¼ ì…ë ¥ë°›ì•„ ì •ìˆ˜ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.

2. ì³ì•¼í•˜ëŠ” ìŒë“¤ì„ ì…ë ¥ë°›ì•„ ì •ìˆ˜ë¡œ ë³€í™˜í•˜ì—¬ ë¦¬ìŠ¤íŠ¸ì— ì €ì¥í•©ë‹ˆë‹¤.

3. calc(depth=0, left=l, right=r) ì„ í˜¸ì¶œí•˜ì—¬ dp ë¦¬ìŠ¤íŠ¸ì— ì˜¬ë°”ë¥¸ ê°’ì„ í• ë‹¹í•´ì¤ë‹ˆë‹¤.

4. calc í•¨ìˆ˜ì—ì„œ ìœ„ ì í™”ì‹ì— ë§ê²Œ, depth ë²ˆì§¸ì— ì™¼ì†ê³¼ ì˜¤ë¥¸ì†ì„ ê°ê° ì›€ì§ì˜€ì„ ë•Œ ì¤‘ ê±°ë¦¬ì˜ ìµœì†Œë¥¼ êµ¬í•˜ì—¬ dp
ë¦¬ìŠ¤íŠ¸ì— ì €ì¥í•´ì¤ë‹ˆë‹¤.

5. i = 0 ë¶€í„° i = N - 1 ê¹Œì§€ ì™¼ì†ê³¼ ì˜¤ë¥¸ì†ì„ ì›€ì§ì˜€ì„ ë•Œì˜ ê±°ë¦¬ë¥¼ ë¹„êµí•˜ì—¬, ë” ì ì€ ì†ì„ ì›€ì§ì—¬ê°€ë©° ì›€ì§ì—¬ì•¼í•˜ëŠ” ì†ë“¤ì„ ì¶œë ¥í•©ë‹ˆë‹¤.

---
## ğŸ” ìœ ì˜í•  ì 

* i ë²ˆì§¸ì˜ ì†ì˜ ìœ„ì¹˜ì— ë”°ë¼ ì´í›„ì— ë”í•´ì ¸ì•¼í•˜ëŠ” ê°’ì´ ë°”ë€” ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì´ ë¬¸ì œì—ì„œëŠ” Assembly Line Scheduling ì„ ì“¸ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

* ì í™”ì‹ì„ ì´í•´í•˜ê³  í‘¼ë‹¤ë©´ í¬ê²Œ ìœ ì˜í•´ì•¼í•  ë¶€ë¶„ì€ ì—†ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.

---

## ğŸ’» ì½”ë“œ

```python
from sys import stdin, setrecursionlimit as SRL
SRL(10 ** 6)

input = stdin.readline


def solve():
    conv = {'C': 0, 'D': 2, 'E': 4, 'F': 5, 'G': 7, 'A': 9, 'B': 11}

    def convert(a):
        return conv[a[0]] + int(a[1]) * 12 + (len(a) == 3)

    l, r = map(convert, input().split())
    N = int(input())

    arr = [*map(convert, input().split())]

    # dp[i][l][r]: i ë²ˆì§¸ì— ì™¼ì†ê³¼ ì˜¤ë¥¸ì†ì´ lê³¼ rì— ìˆì„ ë•Œ, ë§ˆì§€ë§‰ê¹Œì§€ ì—°ì£¼í•˜ëŠ” ê±°ë¦¬
    dp = [[[-1] * 121 for _ in range(121)] for _ in range(N+1)]
    seq = [0] * N

    def calc(depth, left, right):
        if depth == N:
            return 0
        elif dp[depth][left][right] != -1:
            return dp[depth][left][right]

        _l = abs(arr[depth] - left) + calc(depth+1, arr[depth], right)
        _r = abs(arr[depth] - right) + calc(depth+1, left, arr[depth])

        dp[depth][left][right] = _l if _l < _r else _r

        return dp[depth][left][right]

    calc(0, l, r)
    print(dp[0][l][r])

    _l, _r = l, r
    for i in range(N):
        l_val = abs(_l - arr[i]) + dp[i+1][arr[i]][_r]
        r_val = abs(_r - arr[i]) + dp[i+1][_l][arr[i]]

        if l_val < r_val:
            _l = arr[i]
            print(1, end=' ')
        else:
            _r = arr[i]
            print(2, end=' ')


if __name__ == '__main__':
    solve()
```
